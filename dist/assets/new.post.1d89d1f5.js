import{d as e,r as a,q as t,u as n,i as l,o as s,b as o,e as d,g as c,F as i,f as r,t as m,aa as u,ab as p,j as f,ac as v,R as h,p as b,a as k,l as _}from"./vendor.0c0b59c3.js";import{A as g,i as x}from"./index.b3c56bcd.js";import{n as C}from"./index.c044230c.js";import{f as j,A as w,a as y,b as I,m as F,c as U}from"./index.1d4e1c22.js";import{A as E}from"./index.0ff268b1.js";/* empty css              */import{V as R}from"./index.ba1d8091.js";import{b as A}from"./tag.f8471d6c.js";const z=h();b("data-v-5e10e4ca");const M={id:"newpost"},N=f("公开"),q=f("置顶"),B={class:"tags"},K=d("div",{class:"postcontent"},null,-1),T=f("提交");k();var V=e({setup(e){let h=a(new Map),b=a({id:"",title:"",public:!1,top:!1,tags:[],content:""}),k=a({id:"",name:""}),V=a([]);A().then((({data:e})=>{e.forEach((e=>{V.push({id:e.id,name:e.name})}))}));const $=document.createElement("div");t((()=>b.content),((e,a)=>{R.preview($,b.content)}));const D=e=>{h.has(e.name)?_.warn(`已经存在 ${e.name} 的标签`):(""===e.id&&(e.id="0"),""!==e.name&&(h.set(e.name,e.id),e.name=""))},G=n(),H=()=>{if(""!==b.title&&""!==b.content){for(const[e,a]of h)b.tags.push({id:a,name:e});C(b).then((e=>{G.push("/admin")}))}else _.error("请输入博文内容！！！")};return l((()=>{const e=document.getElementsByClassName("postcontent");if(e.length>0){const a=e[0];for(;a.hasChildNodes();)a.firstChild&&a.removeChild(a.firstChild);a.appendChild($)}R.preview($,b.content)})),(e,a)=>(s(),o("div",M,[d(c(U),null,{default:z((()=>[d(c(j.FormItem),{label:"标题"},{default:z((()=>[d(c(g),{value:c(b).title,"onUpdate:value":a[1]||(a[1]=e=>c(b).title=e)},null,8,["value"])])),_:1}),d(c(j.FormItem),{label:""},{default:z((()=>[d(c(w),{checked:c(b).public,"onUpdate:checked":a[2]||(a[2]=e=>c(b).public=e)},{default:z((()=>[N])),_:1},8,["checked"]),d(c(w),{checked:c(b).top,"onUpdate:checked":a[3]||(a[3]=e=>c(b).top=e)},{default:z((()=>[q])),_:1},8,["checked"])])),_:1}),d(c(j.FormItem),{label:"标签"},{default:z((()=>[d("div",B,[(s(!0),o(i,null,r(c(h),((e,a)=>(s(),o("span",{key:a,class:"tag",onClick:a=>{return t=e[0],console.log(h),h.delete(t),void console.log(h);var t}},m(e[0]),9,["onClick"])))),128)),d(c(y),{trigger:["hover","click"]},{overlay:z((()=>[d(c(I),null,{default:z((()=>[(s(!0),o(i,null,r(c(V),((e,a)=>{return u((s(),o(c(F.MenuItem),{key:a,onClick:a=>D(e)},{default:z((()=>[f(m(e.name),1)])),_:2},1032,["onClick"])),[[p,(t=e.name,new RegExp(k.name,"i").test(t))]]);var t})),128))])),_:1})])),default:z((()=>[d(c(g),{type:"text",size:"small",style:{width:"78px"},value:c(k).name,"onUpdate:value":a[4]||(a[4]=e=>c(k).name=e),onKeyup:a[5]||(a[5]=v((e=>D(c(k))),["enter"]))},null,8,["value"])])),_:1})])])),_:1}),d(c(j.FormItem),{label:"内容"},{default:z((()=>[d(c(x.Textarea),{value:c(b).content,"onUpdate:value":a[6]||(a[6]=e=>c(b).content=e),placeholder:"输入博文内容","auto-size":{minRows:5,maxRows:20}},null,8,["value"]),K])),_:1}),d(c(j.FormItem),{label:""},{default:z((()=>[d(c(E),{onClick:H},{default:z((()=>[T])),_:1})])),_:1})])),_:1})]))}});V.__scopeId="data-v-5e10e4ca";export default V;
