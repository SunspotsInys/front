import{d as e,r as a,q as t,Q as n,u as l,i as s,o,b as d,e as i,g as c,F as m,f as r,t as u,aa as p,ab as f,j as v,ac as h,R as b,p as g,a as k,l as _}from"./vendor.21b6d693.js";import{A as x,i as j}from"./index.5fc77090.js";import{g as w,u as y}from"./index.a9a763d4.js";import{f as C,A as I,a as F,b as U,m as E,c as R}from"./index.fc105546.js";import{A}from"./index.6b4eed05.js";/* empty css              */import{V as z}from"./index.4288891d.js";import{b as M}from"./tag.a21796a1.js";const T=b();g("data-v-50239f7b");const q={id:"edit"},B=v("公开"),K=v("置顶"),N={class:"tags"},Q=i("div",{class:"postcontent"},null,-1),V=v("提交");k();var $=e({setup(e){let b=a(new Map),g=a({id:"",title:"",public:!1,top:!1,tags:[],content:""}),k=a({id:"",name:""}),$=a([]);M().then((({data:e})=>{e.forEach((e=>{$.push({id:e.id,name:e.name})}))}));const D=document.createElement("div");t((()=>g.content),((e,a)=>{z.preview(D,g.content)}));const G=e=>{_.info("addTag"),b.has(e.name)?_.warn(`已经存在 ${e.name} 的标签`):(""===e.id&&(e.id="0"),""!==e.name&&(b.set(e.name,e.id),e.name=""))},H=n().params.pid;w(H).then((({data:e})=>{g.id=e.id,g.title=e.title,g.public=e.public,g.content=e.content,g.top=!1,0!==e.top&&(g.top=!0);for(const a of e.tags)b.set(a.name,a.id)}));const J=l(),L=()=>{if(""!==g.title&&""!==g.content){for(const[e,a]of b)g.tags.push({id:a,name:e});y(g).then((e=>{J.push("/admin")}))}else _.error("请输入博文内容！！！")};return s((()=>{const e=document.getElementsByClassName("postcontent");e.length>0&&e[0].appendChild(D),z.preview(D,g.content)})),(e,a)=>(o(),d("div",q,[i(c(R),null,{default:T((()=>[i(c(C.FormItem),{label:"标题"},{default:T((()=>[i(c(x),{value:c(g).title,"onUpdate:value":a[1]||(a[1]=e=>c(g).title=e)},null,8,["value"])])),_:1}),i(c(C.FormItem),{label:""},{default:T((()=>[i(c(I),{checked:c(g).public,"onUpdate:checked":a[2]||(a[2]=e=>c(g).public=e)},{default:T((()=>[B])),_:1},8,["checked"]),i(c(I),{checked:c(g).top,"onUpdate:checked":a[3]||(a[3]=e=>c(g).top=e)},{default:T((()=>[K])),_:1},8,["checked"])])),_:1}),i(c(C.FormItem),{label:"标签"},{default:T((()=>[i("div",N,[(o(!0),d(m,null,r(c(b),((e,a)=>(o(),d("span",{key:a,class:"tag",onClick:a=>{return t=e[0],console.log(b),b.delete(t),void console.log(b);var t}},u(e[0]),9,["onClick"])))),128)),i(c(F),{trigger:["hover","click"]},{overlay:T((()=>[i(c(U),null,{default:T((()=>[(o(!0),d(m,null,r(c($),((e,a)=>{return p((o(),d(c(E.MenuItem),{key:a,onClick:a=>G(e)},{default:T((()=>[v(u(e.name),1)])),_:2},1032,["onClick"])),[[f,(t=e.name,new RegExp(k.name,"i").test(t))]]);var t})),128))])),_:1})])),default:T((()=>[i(c(x),{type:"text",size:"small",style:{width:"78px"},value:c(k).name,"onUpdate:value":a[4]||(a[4]=e=>c(k).name=e),onKeyup:a[5]||(a[5]=h((e=>G(c(k))),["enter"]))},null,8,["value"])])),_:1})])])),_:1}),i(c(C.FormItem),{label:"内容"},{default:T((()=>[i(c(j.Textarea),{value:c(g).content,"onUpdate:value":a[6]||(a[6]=e=>c(g).content=e),placeholder:"输入博文内容","auto-size":{minRows:5,maxRows:20}},null,8,["value"]),Q])),_:1}),i(c(C.FormItem),{label:""},{default:T((()=>[i(c(A),{onClick:L},{default:T((()=>[V])),_:1})])),_:1})])),_:1})]))}});$.__scopeId="data-v-50239f7b";export default $;
